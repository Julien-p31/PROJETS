# Tutoriel : CrÃ©er une extension de navigateur sÃ©curisÃ©e

## ğŸ¯ Objectif  
DÃ©velopper une extension Chrome/Firefox utile tout en intÃ©grant les meilleures pratiques de sÃ©curitÃ©â€¯: gestion minimale de permissions, CSP, stockage sÃ©curisÃ©, revue du code, et mise Ã  jour fiable.

## ğŸ§  ScÃ©nario dâ€™ancrage  
Vous proposez un outil de filtrage de sites dâ€™actualitÃ© sensibles. Lâ€™extension doit Ãªtre sÃ©curisÃ©e pour ne pas devenir un vecteur de fuite de donnÃ©es ou dâ€™attaque.

---

## ğŸ› ï¸ PrÃ©requis  
- Connaissance de base en JavaScript, HTML, CSS  
- Navigateur Chrome ou Firefox avec mode dÃ©veloppeur  
- Outils : Ã©diteur de code, console du navigateur, code review

---

## ğŸ§© Ã‰tape 1 â€“ Structure de lâ€™extension

CrÃ©ez ce dossier minimalâ€¯:

myext/
â”œ manifest.json
â”œ background.js
â”œ popup.html
â”œ popup.js
â”” content.js

**manifest.json** V3 exemple :

```json
{
 "manifest_version":3,
 "name":"SecureFilter",
 "version":"1.0",
 "permissions":["storage","tabs"],
 "host_permissions":["https://*/*","http://*/*"],
 "background":{"service_worker":"background.js"},
 "action":{"default_popup":"popup.html"},
 "content_scripts":[
   {"matches":["<all_urls>"],"js":["content.js"]}
 ]
}

	â€¢	Ne demandez que les permissions indispensablesâ€¦  ï¿¼

â¸»

ğŸ§© Ã‰tape 2 â€“ Code minimal

popup.js :

document.getElementById("btn").addEventListener("click",async()=>{
  const [tab]=await chrome.tabs.query({active:true,currentWindow:true});
  chrome.scripting.executeScript({
    target:{tabId:tab.id},
    func:()=>alert("Hello from SecureFilter")
  });
});

content.js : injecte un header CSP strict si injection de DOM :

const meta=document.createElement('meta');
meta.httpEquiv="Content-Security-Policy";
meta.content="default-src 'self'";
document.head.appendChild(meta);

	â€¢	Active CSP pour Ã©viter les scripts externes. ()

â¸»

ğŸ§© Ã‰tape 3 â€“ Permissions & bonnes pratiques

ğŸ›¡ï¸ Principe du moindre privilÃ¨ge : retirez ce qui nâ€™est pas essentiel ()
ğŸ”‘ SÃ©curisez le stockage : utilisez chrome.storage.local plutÃ´t que localStorage.
ğŸ•µï¸ Revues rÃ©guliÃ¨res du code, idÃ©alement par une tierce personne.
ğŸ”„ Chiffrez toute donnÃ©e sensible avant stockage ou transit.

â¸»

ğŸ§© Ã‰tape 4 â€“ Packaging, audit & publication
	1.	Emballez lâ€™extension (chrome://extensions â†’ â€œPack extensionâ€)
	2.	Analysez avec CRXCavator ou SCEP pour dÃ©tecter vulnÃ©rabilitÃ©s  ï¿¼ ï¿¼
	3.	Publiez sur Chrome Web Store ou Mozilla AMO.
	4.	Surveillez les revues, versions suspectes, et entÃªtes de politque et description ()

â¸»

ğŸ§© Ã‰tape 5 â€“ Maintenance & sÃ©curitÃ© continue
	â€¢	Mettez Ã  jour dÃ¨s quâ€™un bug est dÃ©tectÃ©
	â€¢	DÃ©terminez le risque dâ€™un changement de permission
	â€¢	IntÃ©grez un CSP via manifest ou header
	â€¢	Auditez/encodez votre code minifiÃ©
	â€¢	Soyez vigilant aux supplyâ€‘chain attacks (compte dev compromis)  ï¿¼ ï¿¼

â¸»

ğŸ§ª Quiz de consolidation
	1.	Pourquoi limiter les permissions dans manifest ?
	2.	Ã€ quoi sert un Content-Securityâ€‘Policy ?
	3.	Pourquoi prÃ©fÃ©rer chrome.storage.local ?
	4.	Quels outils pour auditer une extension ?
	5.	Quels risques liÃ©s Ã  la chaÃ®ne dâ€™approvisionnement ?

â¸»

âœ… Cas dâ€™usage concret
	â€¢	Extension anti-traÃ§age ou dâ€™aide Ã  la navigation sur des sites sensibles
	â€¢	Outil de filtrage de contenu avec interface popup et script injection
	â€¢	Extension dâ€™entreprise avec publication sur Chrome Web Store/Firefox AMO

â¸»

ğŸ”§ Extensions possibles
	â€¢	Composant options page + sauvegarde via interface
	â€¢	Utiliser message passing entre contenu & background
	â€¢	Ajouter whitelist/dynamic blocking
	â€¢	Ã‰tendre la sÃ©curitÃ© avec signature du code, CI/CD, scanning annuel

â¸»

ğŸ“ RÃ©sultat attendu
	â€¢	Extension minimaliste, sÃ©curisÃ©e, publique
	â€¢	Architecture claire : manifest, background, content, popup
	â€¢	Permissions justifiÃ©es, stockage sÃ©curisÃ©, CSP
	â€¢	Processus dâ€™audit et maintenance alignÃ© sur les bestâ€‘practices
