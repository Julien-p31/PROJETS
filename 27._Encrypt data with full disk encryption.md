# Tutoriel : Chiffrer un disque entier (Full Disk Encryption) avec LUKS

## ğŸ¯ Objectif  
Appliquer un chiffrement complet dâ€™un disque ou partition Linux pour protÃ©ger **toutes les donnÃ©es au repos** (incluant /, swap, etc.) Ã  lâ€™aide de LUKS + LVM.

## ğŸ§  ScÃ©nario dâ€™ancrage  
Votre laptop contient des donnÃ©es sensibles (documents, clÃ©s). En cas de perte ou vol, seul le mot de passe vous permettrait dâ€™accÃ©der aux fichiers chiffrÃ©s.

---

## ğŸ› ï¸ PrÃ©requis  
- Linux (ex. Ubuntu 22.04)  
- Interface de commande avec `sudo`  
- Disque ou partition dÃ©diÃ©e (non montÃ©e)  
- Outils installÃ©s :  
  ```bash
  sudo apt update
  sudo apt install cryptsetup lvm2

	â€¢	Backup complet des donnÃ©es si disque Ã©tait occupÃ©  ï¿¼ ï¿¼

â¸»

ğŸ§© Ã‰tapeâ€¯1 â€“ Initialiser le disque

sudo wipefs -a /dev/sdX         # supprimer signatures
sudo cryptsetup luksFormat /dev/sdX

	â€¢	SÃ©lection du cipher AESâ€‘XTS & clÃ© 256 bits
	â€¢	CrÃ©ation dâ€™un header LUKS avec slots multiples (8 passphrases max)  ï¿¼
	â€¢	Attention : header non sauvegardÃ© = perte totale des donnÃ©es

â¸»

ğŸ§© Ã‰tapeâ€¯2 â€“ Ouvrir le volume chiffrÃ©

sudo cryptsetup open /dev/sdX secure_disk
# â†’ /dev/mapper/secure_disk apparait

	â€¢	DÃ©chiffrement transparent Ã  lâ€™aide du mot de passe
	â€¢	Nommage secure_disk pour lâ€™usage futur

â¸»

ğŸ§© Ã‰tapeâ€¯3 â€“ CrÃ©er un systÃ¨me de fichiers

sudo mkfs.ext4 /dev/mapper/secure_disk

	â€¢	Pose un systÃ¨me classique sur le volume chiffrÃ©

â¸»

ğŸ§© Ã‰tapeâ€¯4 â€“ Monter et utiliser

sudo mkdir /mnt/secure
sudo mount /dev/mapper/secure_disk /mnt/secure

	â€¢	Copiez vos fichiers dans /mnt/secure
	â€¢	AprÃ¨s usage :

sudo umount /mnt/secure
sudo cryptsetup close secure_disk



â¸»

ğŸ§  Ã‰tapeâ€¯5 â€“ IntÃ©gration dans LVM (optionnel mais recommandÃ©)
	1.	CrÃ©ez un PV LVM :

sudo pvcreate /dev/mapper/secure_disk


	2.	CrÃ©ez un VG et un LV :

sudo vgcreate vg_secure /dev/mapper/secure_disk
sudo lvcreate -n data -l 100%FREE vg_secure


	3.	Formattez et montez le LV :

sudo mkfs.ext4 /dev/vg_secure/data
sudo mount /dev/vg_secure/data /mnt/secure



	â€¢	Plus de flexibilitÃ© : snapshots, redimensionnement, swap chiffrÃ© via LV

â¸»

ğŸ§  Ã‰tapeâ€¯6 â€“ Automatiser lâ€™ouverture au dÃ©marrage

Ajoutez dans /etc/crypttabâ€¯:

secure_disk UUID=<uuid-de-sdX> none luks

Puis ajoutez dans /etc/fstab :

/dev/mapper/secure_disk  /mnt/secure  ext4  defaults  0 2

	â€¢	Utilisation : dÃ©verrouillage Ã  lâ€™amorce GRUB/initramfs
	â€¢	Support via tools Linux & system init  ï¿¼ ï¿¼ ï¿¼

â¸»

ğŸ§© Ã‰tapeâ€¯7 â€“ VÃ©rification & durcissement
	â€¢	Identifiez le type :

sudo cryptsetup luksDump /dev/sdX


	â€¢	RÃ©-encryption du header (LUKS2 Argon2 vs.pbkdf2)  ï¿¼
	â€¢	Chiffrement complet du volume y compris swap = protection maximale  ï¿¼

â¸»

ğŸ§  Ã‰tapeâ€¯8 â€“ Bonnes pratiques / piÃ¨ges Ã  Ã©viter
	â€¢	âœ”ï¸ Sauvegardez le header LUKS (cryptsetup luksHeaderBackup)
	â€¢	ğŸ” Choisissez un mot de passe robuste et unique
	â€¢	âš ï¸ Ne perdez jamais les keys/passphrase â€“ vous perdrez lâ€™accÃ¨s
	â€¢	â˜€ï¸ Ã‰vitez la mise en veille suspendue avec le disque chiffrÃ© (risque de fuite mÃ©moire)  ï¿¼

â¸»

ğŸ§ª Quiz de consolidation
	1.	Pourquoi LUKS supporte-t-il plusieurs slots de passphrase ?
	2.	Quelle est la diffÃ©rence entre chiffrement de partition et disque entier ?
	3.	Quel risque si vous perdez le header LUKS ?
	4.	Pourquoi intÃ©grer un disque chiffrÃ© dans LVM ?
	5.	Quel mode dâ€™attaque reste possible malgrÃ© FDE (ex. coldâ€‘boot) ?

â¸»

âœ… Cas dâ€™usage
	â€¢	Protection antiâ€‘vol pour laptops, serveurs & sauvegardes
	â€¢	Disques transportables avec donnÃ©es sensibles (USB/SSD)
	â€¢	Environnements rÃ©glementÃ©s (RGPD, stockages financiers)

â¸»

ğŸ”§ Extensions possibles
	â€¢	Utiliser TPM2 + LUKS pour dÃ©verrouillage sans mot de passe  ï¿¼ ï¿¼ ï¿¼ ï¿¼
	â€¢	Chiffrer /boot avec GRUB pour un disque totalement opaque  ï¿¼
	â€¢	Automatiser avec Ansible ou Terraform en infra cloud/hybride

â¸»

ğŸ“ RÃ©sultat attendu
	â€¢	Disque ou partition chiffrÃ©, utilisable et protÃ©gÃ© sur Linux
	â€¢	DÃ©verrouillage sÃ»r au boot ou manuellement
	â€¢	Volume prÃªt pour le stockage sÃ©curisÃ© ou la sauvegarde chiffrÃ©e
	â€¢	Bonnes pratiques assimilÃ©es concernant gestion du header et rÃ©cupÃ©ration

---

### ğŸ“š Sources & Inspiration

- Ubuntu/Debian : guide FDE avec LUKS + LVM  [oai_citation:14â€¡LinuxConfig](https://linuxconfig.org/ubuntu-22-04-enable-full-disk-encryption?utm_source=chatgpt.com)  
- ArchWiki : cryptsetup, LUKS1 vs LUKS2, boot GRUB  [oai_citation:15â€¡ArchWiki](https://wiki.archlinux.org/title/Dm-crypt/Encrypting_an_entire_system?utm_source=chatgpt.com)  
- Introduction Ã  LUKS, PBKDF2, slots utilisateurs  [oai_citation:16â€¡fedoraproject.org](https://fedoraproject.org/wiki/Disk_encryption_formats?utm_source=chatgpt.com)  
- Meilleures pratiques chiffrement disque, risques sideâ€‘channel  [oai_citation:17â€¡Wikipedia](https://en.wikipedia.org/wiki/Disk_encryption?utm_source=chatgpt.com)