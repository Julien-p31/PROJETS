# Tutoriel : Mettre en place TLS pour des communications sÃ©curisÃ©es

## ğŸ¯ Objectif  
Configurer un serveur web (Nginx) avec HTTPS/TLS Ã  lâ€™aide de certificats auto-signÃ©s ou Let's Encrypt, pour garantir confidentialitÃ©, intÃ©gritÃ© et authentification des communications.

## ğŸ§  ScÃ©nario dâ€™ancrage Ã©motionnel  
Vous administrez un service interne ou un site web. Sans TLS, les informations sensibles transitent en clair, exploitables par des attaquants. En activant TLS, vous protÃ©gez les donnÃ©es UTILEMENT.

---

## ğŸ› ï¸ PrÃ©requis  
- Serveur Ubuntu/Debian avec accÃ¨s `sudo`  
- Nginx installÃ©  
- Domaine pointant vers le serveur (pour Let's Encrypt)  
- `openssl` et `certbot` installÃ©s

---

## ğŸ§© Ã‰tapeâ€¯1 â€“ GÃ©nÃ©rer un certificat auto-signÃ© (dev/test)

```bash
sudo apt update
sudo apt install openssl
openssl req -newkey rsa:2048 -nodes \
  -keyout /etc/ssl/private/self.key \
  -x509 -days 365 \
  -out /etc/ssl/certs/self.crt \
  -subj "/C=FR/ST=Paris/L=Dunkerque/O=Moi/CN=monserveur"

	â€¢	CrÃ©ation de self.key (clÃ© privÃ©e) et self.crt (certificat X.509)  ï¿¼ ï¿¼ ï¿¼ ï¿¼
	â€¢	Utile pour environnement non-public ()

â¸»

ğŸ§© Ã‰tapeâ€¯2 â€“ Configurer Nginx pour HTTPS

CrÃ©ez un fichier /etc/nginx/sites-available/mon_tls :

server {
  listen 80;
  server_name monserveur; 
  return 301 https://$host$request_uri;
}

server {
  listen 443 ssl http2;
  server_name monserveur;

  ssl_certificate     /etc/ssl/certs/self.crt;
  ssl_certificate_key /etc/ssl/private/self.key;

  ssl_protocols       TLSv1.2 TLSv1.3;
  ssl_prefer_server_ciphers on;
  ssl_ciphers         EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH;  

  location / {
    root /var/www/html;
    index index.html;
  }
}

Activez la config :

sudo ln -s /etc/nginx/sites-available/mon_tls /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx

	â€¢	TLS 1.2 et 1.3 sont activÃ©s, SNI supportÃ©  ï¿¼

â¸»

ğŸ” Ã‰tapeâ€¯3 â€“ Utiliser un vrai certificat (Letâ€™s Encrypt)
	1.	Installez Certbot :

sudo apt install certbot python3-certbot-nginx

	2.	ExÃ©cutez Certbot :

sudo certbot --nginx -d monserveur -m vous@exemple.com --agree-tos --redirect

Certbot :
	â€¢	obtient un certificat signÃ© gratuit
	â€¢	modifie automatiquement la config Nginx
	â€¢	active un cron pour le renouvellement  ï¿¼

â¸»

ğŸ§  Ã‰tapeâ€¯4 â€“ VÃ©rification & durcissement
	â€¢	VÃ©rifiez avec nginx -t & systemctl reload nginx
	â€¢	Testez votre site via https://monserveur
	â€¢	Analysez la config SSL (ex. SSL Labs)
	â€¢	Ajoutez en-tÃªtes de sÃ©curitÃ© (HSTS, CSP, X-Content-Type-Options) via Flask-Talisman ou config Nginx

â¸»

ğŸ§© Ã‰tapeâ€¯5 â€“ Maintenance & bonnes pratiques
	â€¢	Surveillance automatique des renouvellements :

sudo certbot renew --dry-run


	â€¢	Pour les certificats auto-signÃ©s : dÃ©ployer le certificat racine localement dans les navigateurs pour Ã©viter lâ€™avertissement  ï¿¼ ï¿¼ ï¿¼
	â€¢	Garder TLS 1.2+ en prioritÃ©, dÃ©sactiver SSL/TLS obsolÃ¨tes

â¸»

ğŸ§ª Quiz de consolidation
	1.	Quelle est la diffÃ©rence entre certificat auto-signÃ© et signÃ© par une autoritÃ© (CA) ?
	2.	Pourquoi rediriger le port 80 vers 443 ?
	3.	Ã€ quoi sert SNIâ€¯?
	4.	Pourquoi TLSâ€¯1.2 et 1.3 ?
	5.	Comment tester le renouvellement automatique Letâ€™s Encrypt ?

â¸»

âœ… Cas dâ€™usage
	â€¢	Serveur web interne ou portail dâ€™entreprise
	â€¢	Labo ou dÃ©veloppement avec certificats sÃ©curisÃ©sâ€¯
	â€¢	Protection automatique dâ€™un site public avec TLS gratuit

â¸»

ğŸ”§ Extensions possibles
	â€¢	GÃ©rer des certificats wildcard via DNS challenge
	â€¢	Automatiser le dÃ©ploiement via Ansible
	â€¢	Ajouter mutual TLS (mTLS) pour authentifier les clients
	â€¢	Extraction de mÃ©triques TLS avec Prometheus + Grafana

â¸»

ğŸ“ RÃ©sultat attendu
	â€¢	Serveur accessible en HTTPS (+ redirection depuis HTTP)
	â€¢	Certificat valide (mÃªme auto-signÃ© pour test)
	â€¢	Bonne configuration TLS solide et Ã  jour (chiffres + protocoles)

---

### ğŸ“š Sources principales  
- GÃ©nÃ©ration avec OpenSSL sur Linux  [oai_citation:9â€¡TecAdmin](https://tecadmin.net/step-by-step-guide-to-creating-self-signed-ssl-certificates/?utm_source=chatgpt.com) [oai_citation:10â€¡Nginx](https://nginx.org/en/docs/http/configuring_https_servers.html?utm_source=chatgpt.com) [oai_citation:11â€¡ubuntumint.com](https://www.ubuntumint.com/generate-self-signed-ssl-certificates-using-openssl/?utm_source=chatgpt.com) [oai_citation:12â€¡Kamatera](https://www.kamatera.com/knowledgebase/how-to-secure-nginx-with-lets-encrypt/?utm_source=chatgpt.com)  
- Configuration TLS/SNI sur Nginx ()  
- Installation et renouvellement via Let's Encrypt & Certbot  [oai_citation:13â€¡ferrydermawan.com](https://ferrydermawan.com/blog/secure-nginx-ssl-tls-lets-encrypt-ubuntu?utm_source=chatgpt.com)