# Tutoriel : Mettre en place un honeypot pour collecter des donnÃ©es de menaces

## ğŸ¯ Objectif  
DÃ©ployer un honeypot openâ€‘source pour attirer des attaquants, enregistrer leurs actions et techniques, et gÃ©nÃ©rer des donnÃ©es utiles pour l'analyse et le renforcement de la sÃ©curitÃ©.

## ğŸ§  ScÃ©nario dâ€™ancrage Ã©motionnel  
Une entreprise subit des scans suspects depuis l'internet. Vous installez un honeypot dans la DMZ pour attirer ces attaquants, collecter leurs mÃ©thodes et analyser leurs comportements sans risquer vos systÃ¨mes de production.

---

## ğŸ› ï¸ PrÃ©requis  
- Machine Linux (Debian/Ubuntu) ou VM isolÃ©e  
- `sudo` et accÃ¨s rÃ©seau  
- Choix dâ€™un honeypot : **Cowrie**, **Honeyd**, **OpenCanary**, ou **Dionaea**  
- Installer un OS lÃ©ger (200â€¯MB) avec Python support

---

## Ã‰tapeâ€¯1 â€“ DÃ©finir votre objectif  
- **Observation** : basique, voir qui scanne  
- **Threat Intelligence** : collecter des commandes, IPs, TTPs  
- **DÃ©tection** : dÃ©tection de mouvements latÃ©raux via leur activitÃ© dans le pot  [oai_citation:0â€¡rehacktory.com](https://rehacktory.com/2024/12/26/step-by-step-guide-to-setting-up-a-honeypot-for-threat-analysis/?utm_source=chatgpt.com) [oai_citation:1â€¡Intezer](https://intezer.com/blog/how-to-make-malware-honeypot/?utm_source=chatgpt.com) [oai_citation:2â€¡Wikipedia](https://en.wikipedia.org/wiki/MISP_Threat_Sharing?utm_source=chatgpt.com) [oai_citation:3â€¡FreeCodeCamp](https://www.freecodecamp.org/news/build-a-honeypot-with-python/?utm_source=chatgpt.com) [oai_citation:4â€¡smokescreen.io](https://www.smokescreen.io/practical-honeypots-a-list-of-open-source-deception-tools-that-detect-threats-for-free/?utm_source=chatgpt.com)

---

## Ã‰tapeâ€¯2 â€“ Choisir et installer le honeypot  
### ğŸš Lowâ€‘interaction â€“ OpenCanary  
```bash
pip install opencanary
opencanaryd --copyconfig
vim ~/.opencanary.conf  # activer SSH/HTTP/Telnet
opencanaryd --start

Rapports envoyÃ©s sur filesystem + webhook ()

ğŸ Mediumâ€‘interaction â€“ Cowrie (SSH)

git clone https://github.com/cowrie/cowrie.git
cd cowrie; pip install -r requirements.txt
cp etc/cowrie.cfg.dist etc/cowrie.cfg
./cowrie start

Logs SSH complets : tentatives, commandes, mots de passe.

ğŸŒ Networkâ€‘level â€“ Honeyd

sudo apt install honeyd
honeyd -d -f honeyd.conf

Simule des IP/OS variÃ©s, dÃ©tecte scans via interactions rÃ©seau  ï¿¼

â¸»

ğŸ§© Ã‰tapeâ€¯3 â€“ Isoler le honeypot
	â€¢	Placez-le en DMZ ou rÃ©seau isolÃ©, protÃ©gÃ© par pareâ€‘feu, sans accÃ¨s Ã  vos systÃ¨mes critiques  ï¿¼
	â€¢	Configurez firewall pour limiter lâ€™exfiltration de donnÃ©es

â¸»

ğŸ§© Ã‰tapeâ€¯4 â€“ Configurer le logging & monitoring
	â€¢	Activez logging dans /var/log/<honeypot>/ (JSON ou plaintext)
	â€¢	Installez ELK ou Splunk pour ingÃ©rer les logs
	â€¢	Normalisez les champs : IP, date/heure, actions, rÃ©sultats

â¸»

ğŸ§  Ã‰tapeâ€¯5 â€“ Visualiser & analyser
	â€¢	Observez via dashboards :
	â€¢	IP sources frÃ©quentes
	â€¢	Commandes SSH
	â€¢	Tentatives de login
	â€¢	AgrÃ©gation : top 10 ips, commandes reconnues, volumes

â¸»

ğŸ” Ã‰tapeâ€¯6 â€“ GÃ©nÃ©rer des IOC & enrichir les alertes
	â€¢	Extrayez : adresses IP, user-agents, motifs de commandes
	â€¢	Poussez vers MISP ou SIEM pour enrichissement & partage  ï¿¼ ï¿¼

â¸»

ğŸ§ª Quiz de consolidation
	1.	Pourquoi isoler le honeypot du rÃ©seau de production ?
	2.	Quelles diffÃ©rences entre low et medium interaction ?
	3.	Quels types de TTPs peutâ€‘on observer avec Cowrie ?
	4.	Pourquoi centraliser les logs dans ELK ou Splunk ?
	5.	Comment partager les IOC gÃ©nÃ©rÃ©s ?

â¸»

âœ… Cas dâ€™usage concret
	â€¢	Collecte de nouveaux schÃ©mas dâ€™attaque (botnet, scans SSH)
	â€¢	Centre de dÃ©tection prÃ©coce pour mouvements latÃ©raux
	â€¢	Environnement dâ€™analyse pour enrichir vos signatures IDS

â¸»

ğŸ”§ Extensions possibles
	â€¢	DÃ©ployer T-Pot pour un honeynet multiâ€‘services complet  ï¿¼ ï¿¼ ï¿¼
	â€¢	Automatiser via Docker + introspection logs
	â€¢	Utiliser machine learning pour dÃ©tecter patterns anormaux dans les logs  ï¿¼
	â€¢	Simuler honeypots sur Azure et intÃ©grer avec Microsoft Sentinel  ï¿¼

â¸»

ğŸ“ RÃ©sultat attendu
	â€¢	Honeypot fonctionnel (OpenCanary, Cowrie ou Honeyd) attirant des connexions malveillantes
	â€¢	Logs de menace centralisÃ©s et analysÃ©s avec indicateurs spÃ©cifiques
	â€¢	Plateforme prÃªte Ã  produire des IOC, rapports et enrichissement sur base dâ€™alertes rÃ©elles

â¸»

ğŸ“š RÃ©fÃ©rences
	â€¢	Objectifs & types de honeypots  ï¿¼
	â€¢	OpenCanary, Cowrie, Honeyd â€“ projets reconnus ()
	â€¢	Centralisation dans MISP/ELK/SIEM  ï¿¼
