# Tutoriel : Tester des protocoles de routage sÃ©curisÃ©s (RPKI, BGPsec, OSPFâ€¦)

## ğŸ¯ Objectif  
Mettre en place un laboratoire de test pour Ã©valuer et valider des protocoles de routage sÃ©curisÃ©s (RPKIâ€‘OV, BGPsec, authentification OSPF/RIP), analyser leur comportement en cas de route invalides, fuite de donnÃ©es ou hijacking, et comparer les mises en Å“uvre libres (BGPâ€‘SRx, BRIOâ€¦).

## ğŸ§  ScÃ©nario dâ€™ancrage  
Suite Ã  une fuite de route BGP annonÃ§ant un prÃ©fixe externe sur votre rÃ©seau, vous devez dÃ©ployer des protections robustes (RPKI, BGPsec) et vÃ©rifier que les routeurs rejettent toute annonce invalide.

---

## ğŸ› ï¸ PrÃ©requis  
- Linux (Ubuntu/Debian) + Docker/dockerâ€‘compose  
- Routeur BGP logiciel (ex. GoBGP, Quagga)  
- NISTâ€¯BGPâ€‘SRx ou BRIO pour gÃ©nÃ©rer du trafic BGP/RPKI  
- Client RPKI (ex. Routinator ou RTRlib)  
- Wireshark pour inspection

---

## ğŸ§© Ã‰tapeâ€¯1 â€“ Installer BGPâ€‘SRx (NIST)

```bash
git clone https://github.com/usnistgov/NIST-BGP-SRx.git
cd NIST-BGP-SRx
docker-compose up -d

	â€¢	Modules inclus : Quagga-SRx, GoBGPsec, SRxâ€‘Server pour validation RPKI-OV/PV  ï¿¼ ï¿¼
	â€¢	BÃ©nÃ©fice : environnement complet pour tester RPKI origin validation & BGPsec path signing

â¸»

ğŸ§© Ã‰tapeâ€¯2 â€“ Configurer RPKI origin validation
	1.	Lancez un cache RPKI (ex. Routinator), configurez SRxâ€‘Server pour pointer vers.
	2.	Configurez votre routeur BGP (Quagga ou GoBGPsec) pour utiliser RPKIâ€‘OV.
	3.	Utilisez BRIO pour annoncer une route valide, puis une route invalide (IP non couverte par ROA)  ï¿¼.
	4.	Observez via logs ou BGP table : les routes invalides sont rejetÃ©es.

â¸»

ğŸ” Ã‰tapeâ€¯3 â€“ Tester BGPsec path validation
	1.	Dans SRxâ€‘Server, activez validation de chemin (BGPâ€‘PV).
	2.	Avec BRIO, gÃ©nÃ©rez un chemin BGPsec signÃ© (brio_tg) via clÃ© valide.
	3.	Injectez un chemin falsifiÃ© ou incomplÃ¨tement signÃ©.
	4.	VÃ©rifiez que votre routeur rejette les chemins BGPsec non conformes.  ï¿¼ ï¿¼ ï¿¼

â¸»

ğŸ§© Ã‰tapeâ€¯4 â€“ Comparer les implÃ©mentations
	â€¢	ExÃ©cutez le mÃªme test avec Quaggaâ€‘SRx vs GoBGPsec
	â€¢	Comparez les logs, performances, dÃ©lais de convergence et rejets
	â€¢	Notez les limitations Ã©ventuelles (scalabilitÃ©, interopÃ©rabilitÃ©)  ï¿¼

â¸»

ğŸ” Ã‰tapeâ€¯5 â€“ Ajouter authentification Ã  OSPF/RIP/ EIGRP
	â€¢	Pour RIP v2, OSPF, implÃ©mentez authentification par clÃ© symÃ©trique sur vos routeurs (ex. Quagga, FRR).
	â€¢	Simulez un routeur nonâ€‘authentifiÃ© annonÃ§ant des routes : il doit Ãªtre rejetÃ©  ï¿¼

â¸»

ğŸ§© Ã‰tapeâ€¯6 â€“ Monitoring via RPKIâ€‘Monitor et BRITE
	â€¢	Surveillez lâ€™Ã©volution des validitÃ©s RPKI via le NIST RPKI Monitor  ï¿¼
	â€¢	Utilisez BRITE pour Ã©valuer des scÃ©narios complexes (cache overflow, routage dynamique)  ï¿¼

â¸»

ğŸ§  Ã‰tapeâ€¯7 â€“ Analyse & reporting
	â€¢	Exportez les captures Wireshark des mises Ã  jour BGP et des messages RPKI
	â€¢	Compilez un rapport : route annoncÃ©e, validitÃ©, rÃ©ponses, rejet ou acceptation
	â€¢	Critiquez les dÃ©tections automatisÃ©es vs cas manuel (route leak, hijackâ€¦)

â¸»

ğŸ§ª Quiz de consolidation
	1.	Quelle diffÃ©rence entre RPKI-OV et BGPsec ?
	2.	Pourquoi valider un chemin BGP avec BGPsec ?
	3.	Que se passe-t-il si un routeur OSPF reÃ§oit un LSA non authentifiÃ© ?
	4.	Quel outil gÃ©nÃ¨re des routes synthÃ©tiques BGPsecâ€¯?
	5.	Quâ€™observe-t-on dans les logs quand une route invalidÃ©e est rejetÃ©e ?

â¸»

âœ… Cas dâ€™usage
	â€¢	DÃ©ploiement opÃ©rationnel de RPKI & BGPsec pour votre AS
	â€¢	Audit de conformitÃ© et protection contre les hijacks
	â€¢	Environnement de test pour formation ou sensibilisation ingÃ©nieurs rÃ©seaux

â¸»

ğŸ”§ Extensions possibles
	â€¢	Automatiser avec Ansible + CI/CD pour validation continue
	â€¢	IntÃ©grer vÃ©rification de ASPA (routing policy) avec SRx
	â€¢	Comparer avec solutions commerciales (Cisco, Juniper)
	â€¢	DÃ©ployer un observatoire global de routes via ARTEMIS  ï¿¼ ï¿¼ ï¿¼ ï¿¼

â¸»

ğŸ“ RÃ©sultat attendu
	â€¢	Infrastructure Docker fonctionnelle : routeurs BGP sÃ©curisÃ©s, SRx, BRIO
	â€¢	Validation automatique des routes invalides (rejet OSPF/RIP)
	â€¢	Rapports dÃ©taillÃ©s avec preuves de blocages BGP
	â€¢	CompÃ©tences approfondies sur les protocoles sÃ©curisÃ©s de routage

---

### ğŸ“š Sources  
- NIST BGPâ€‘SRx & BRIO : implÃ©mentations open-source BGPsec/RPKI test suite  [oai_citation:14â€¡NIST](https://www.nist.gov/services-resources/software/bgp-secure-routing-extension-bgp-srx-software-suite?utm_source=chatgpt.com) [oai_citation:15â€¡geeksforgeeks.org](https://www.geeksforgeeks.org/computer-networks/securing-routing-protocols/?utm_source=chatgpt.com)  
- Tests OSPF/RIP via authentification : sÃ©curisation des protocoles routing classiques ()  
- Analyse RPKI et adoption BGPsec via RPKI Monitor & BRITE  [oai_citation:16â€¡rpki-monitor.antd.nist.gov](https://rpki-monitor.antd.nist.gov/Methodology?utm_source=chatgpt.com)  
- Ã‰tude de rÃ©ponse rapide aux hijacks BGP (ARTEMIS)  [oai_citation:17â€¡arXiv](https://arxiv.org/abs/1801.01085?utm_source=chatgpt.com)